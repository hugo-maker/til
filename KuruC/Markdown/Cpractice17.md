# 17章 ファイルの取扱い

## テキストファイルの読み書き

### ファイルを扱う

- fopen関数とfclose関数
- 使い方: FILE型のポインタ変数 = fopen(ファイル名,モード);
          fclose(FILE型のポインタ変数);
- FILE型: 構造体
- FILE型のポインタ変数: フィアルポインタと呼ぶ
- fopen で他のソフトでファイルを書き換えられないように鍵をかける⇔ fclose で鍵を外す(複数ソフトでのファイルの同時書き換えを防ぐための仕組み)

### ファイルへの書き込み

- fprintf(ファイルポインタ,書き込む文字列,変数...)

### ファイルからの読み込み

- fscanf(ファイルポインタ,"入力変換指定子",&変数名);
- %d指定子を使用した場合、数字以外のテキストは無視される
- %s指定子を使用すれば文字列全体を読み込める(ただし、スペース等が含まれる場合はそこまでしか読み込まれない)
- 複数の数値をカンマで区切って並べると、複数の変数を読み込める
- 上記の形式をCSV形式(comma-separated values)と呼ぶ

## バイナリファイルの読み書き

### バイナリファイルとは

- 数値のみで記録されたファイル
- 本質的にはテキストファイルもバイナリファイル
- バイナリファイルのほうがサイズが小さく高速

### バイナリファイルの操作

- fopen fcloseで操作
- モード文字列の最後にbをつけることにだけ注意

### バイナリファイルの書き込み

- fwrite(書き込む変数のアドレス,1項目のサイズ,項目数,ファイルポインタ);

**Vimでバイナリファイルの編集**
- $ vim -b file.bin
    :%!xxd
    これでバイナリダンプ表示になる
- :%!xxd -r 編集後はこのコマンドで元に戻す

### バイナリファイルからの読み込み

- fread(読み込み変数のポインタ,1項目のサイズ,項目数,ファイルポインタ);

## ドラッグへの対応

### コマンドライン引数

- アプリケーション起動時に渡される文字列のこと。主に処理するファイル名や動作オプションを指定する。
- 例: int main(int argc,char *argv[]);
- argc コマンドラインの数
- argv 文字配列へのポインタ変数
- printf("%s",argv[0]); 0番目(最初)のコマンドラインを表示
- コマンドラインの0番目はアプリケーション自身のファイル名になる(git_automatic.shの使い方にも書いてあった)
