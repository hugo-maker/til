# Chapter 4

- プロセススケジューラとは: Linuxカーネルが持つ、複数プロセスを同時に動作させているかのように見せかけるための機能。
- マルチコアCPUは、Linuxからは一つのコアが一つのCPUとして認識される。
- コンテキストスイッチとは：論理CPU上で動作するプロセスが切り替わること。プロセスがどんなコードを実行中だとしても、タイムスライスが切れると常に発生する。
- タイムスライスとは: 一台のコンピュータを同時に複数の主体で利用できるよう、処理時間を非常に短い時間間隔で均等に分割したもの。マルチタスクオペレーティングシステムによるプロセス管理の時間単位のこと。

プロセスと論理CPU
- 任意の瞬間に論理CPU上で動作できるプロセスは一つのみ。
- 論理CPU上では、複数のプロセスがプロセスを順に一つずつ動かし、一周したらまた一番目のプロセスに戻る(=ラウンドロビン方式)。
- 各プロセスの持つタイムスライスの長さは大体等しくなる。
- プロセス終了までの経過時間は、プロセス数に比例。

プロセスの状態
- 実行状態: 現在論理CPUを使用中
- 実行待ち状態or実行可能状態: CPU時間が割り当てられるのを待っている
- スリープ状態: 何らかのイベントが発生するのを待っている。イベント発生までCPU時間は使わない。
- ゾンビ状態: プロセス終了後、親プロセスが終了状態を受け取るのを待っている。
- プロセスの一生: ×生成後CPU時間を好きなだけ使って終わり ○生存中は、実行状態、実行可能状態、スリープ状態、という複数の状態を行ったり来たりする
- アイドルプロセスとは: 何もしない仮想的なプロセス。

スループットとレイテンシ: 各種処理の性能指標
- スループットとは: 単位時間あたりの総仕事量。論理CPUの計算リソースを使い切っているほど(=アイドル状態の割合が低いほど)高くなる。
- レイテンシとは: それぞれの処理の開始から終了までの経過時間。
- 論理CPUの計算リソースを完全に使い切っている(=全ての論理CPUがアイドル状態にならない)状況では、プロセスの数に関わらず、スループットは等しくなる。
- プロセスが増えるほど、レイテンシは悪化する。
- スループットとレイテンシはトレードオフの関係になることが多い。

複数論理CPU間でのスケジューリング
- ロードバランサorグローバルスケジューラとは: 複数の論理CPU間でプロセスを公平に分配する機能。
- マルチコアCPU環境では、複数プロセスを同時に動作させないとスループットは上がらない。コア数と性能は単純に比例はしない(比例するのは最良ケースの話)。
- マルチコアCPU環境でも、プロセス数を論理CPU数より多くしてもスループットは向上しない。
