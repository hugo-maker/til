# Chapter 6

キャッシュメモリ
- キャッシュメモリとは: レジスタ上の計算とメモリアクセスの速度差(後者が格段に遅い)を埋めるためのもの。
- キャッシュメモリからレジスタへのアクセスは、メモリからのそれに比べ、数倍~数十倍高速。
- データの書き換え: CPUのレジスタから、変更したデータをキャッシュメモリに書き込む。→キャッシュライン(キャッシュメモリにおけるデータの読み書きの単位)にデータが変更されたことを示す印をつける(印付きのキャッシュラインはダーティである)→ダーティであるキャッシュラインが、後々所定のタイミングでバックグラウンドでメモリに書き戻される。

参照の局所性
- 時間的局所性: ある時点でアクセスされたデータは、近い将来に再びアクセスされる可能性が高い。(ループ処理の中のコード領域など)
- 空間的局所性: ある時点であるデータにアクセスされると、それに近い場所のデータにアクセスする可能性が高い。(配列要素の全走査など)
- 短時間に区切って考えると、獲得したメモリ総量に比して非常に狭い範囲のメモリにアクセスが集中する傾向がある。→キャッシュメモリのサイズがこの狭い範囲より大きければプログラムのパフォーマンスは飛躍的に向上する。

Translation Lookaside Buffer (TLB)
- TLBとは: 仮想アドレスから物理アドレスへの変換表を保持し、キャッシュメモリと同様に高速にアクセスできる、CPU内の領域。

ページキャッシュ
- ページキャッシュとは: CPUからメモリへのアクセス速度と、CPUからストレージへのアクセス速度の大幅な差を埋めるためのカーネルの機能。
- ストレージデバイス上のファイルデータをメモリにキャッシュする。
- データの扱いはページ単位。
- 設定変更や時間経過により、システムのパフォーマンスが急に数桁も劣化した→ファイルデータがページキャッシュに収まりきらなくなった可能性あり。

ハイパースレッド機能
- ハイパースレッド機能とは: CPUコアの中のレジスタ等一部の資源を複数用意し、ハイパースレッドに分割するハードウェア機構。
- ハイパースレッドとは: システムからそれぞれ論理CPUとして認識される。
- 現実的には、スループットが20~30%程度向上すれば良い方。逆に性能が劣化することもあるため、実際に負荷をかけてみての性能比較が必要。
