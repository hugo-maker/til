# Chapter 15

## シェルスクリプト
- シェルスクリプトの記述: shは互換性・移植性に問題を抱えている上、機能も貧弱で書きにくい→おとなしくbashで書くべき
- shebang(シェバン)とは: インタプリタの指定。書いておくと、コマンドラインでいちいち/bin/bashと書かなくてもよくなる。

## シェルスクリプトの実行方法
1. ファイル名のみ指定して実行 ./filename
1. シェルの引数として実行 bash filename
1. sourceコマンドで実行 source ./filename

- ファイル名で実行: 新しくサブシェルが開かれ、サブシェルでシェルスクリプトが実行される。=環境変数は反映されるが、エイリアスなどは反映されない。基本的にはこの方法で実行するのが無難。
- sourceコマンド or .コマンド: 指定したファイルの内容をそのままコマンドラインに入力したのと同様に実行=現在のシェル環境の影響を受ける+実行後現在のシェルに影響を与える。vimrcとかbashrcはこれで。意図していないファイルを読み込んでしまうことを避けるため、sourceコマンド使用時は、基本的にファイルを相対パスor絶対パスで記述する。

# Chapter 16

- セカンダリプロンプトとは: \\(バックスラッシュで表される)。コマンドラインが終了していないことを示す。シェルスクリプトでも同様に改行を示す。
- 変数の扱い: 代入時には$はつけない。変数展開して値を参照したい場合のみ$をつける(C言語の&演算子みたいな感じ)。
- シングルクォートとダブルクォート: シングルクォート中では$も特別な意味を失い、そのまま$として解釈される。ダブルクォート中では、$による変数展開、コマンド置換は有効なまま。
- コマンド置換とは: コマンドの結果を文字列として取得できる機能。バッククォートで囲む(不便なため非推奨)か、$(command)として使用。
- 位置パラメータとは: シェルスクリプトからコマンドライン引数を扱うために使用するシェル変数。$1, $2, $3...と続く。
- シェルスクリプトでのif文: if文の後ろには、条件式ではなく、コマンドが置かれる。
if [ "$1" = "hoge" ]; then
[は実はコマンド。"$1", "hoge", ] は引数。

- コマンドの終了ステータス: 正常終了0, エラー時は0以外。
- [コマンド: 引数に書かれた条件式を評価し、真なら0,偽なら0以外を終了ステータスとして返す。
- 自作シェルスクリプトの終了ステータス: 特に明示(exit <終了ステータス>で指定できる)しなければ、スクリプト内で最後に実行したコマンドの終了ステータスになる。
- エラー時に0以外の終了ステータスを返すようにすることで、シェルスクリプトが別のプログラムから呼ばれた際にエラー処理を行わせることができる。
- bashの算術展開式: $(())のように二重括弧でくくる。可読性が高く、動作も高速。
- シェル関数内では、位置パラメータが関数の引数へと置き換えられる。
